
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Chart.js Test</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .chart-container { 
            width: 800px;
            height: 400px;
            margin: 20px auto;
            position: relative;
        }
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            padding: 8px 16px;
            margin: 0 5px;
            cursor: pointer;
        }
        .active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
    </style>
</head>
<body>
    <div class="controls">
        <h1>Minimal Chart.js Test</h1>
        <div>
            <button id="lineBtn" class="active">Line Chart</button>
            <button id="areaBtn">Area Chart</button>
            <button id="barBtn">Bar Chart</button>
            <button id="downloadBtn">Download Chart</button>
        </div>
    </div>
    
    <div class="chart-container">
        <canvas id="testChart"></canvas>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Sample data
        const labels = ["2025-01-29", "2025-01-30", "2025-01-31", "2025-02-01", "2025-02-02", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-08", "2025-02-09", "2025-02-10", "2025-02-11", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-15", "2025-02-16", "2025-02-17", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-22", "2025-02-23", "2025-02-24", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-01", "2025-03-02", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-08", "2025-03-09", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-15", "2025-03-16", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-20", "2025-03-21", "2025-03-22", "2025-03-23", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-29", "2025-03-30", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-05", "2025-04-06", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-12", "2025-04-13", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-19", "2025-04-20", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-26", "2025-04-27", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-03", "2025-05-04", "2025-05-05", "2025-05-06", "2025-05-07", "2025-05-08"];
        const defaultData = [10000, 10029.765118547952, 10000.699377303174, 10160.083350785513, 10111.74832931365, 10124.583999750297, 9995.598376953749, 10053.606006784876, 9996.351560023499, 10106.151580977335, 10027.69773564019, 9787.181582083986, 9885.01873395631, 9881.285824417026, 9978.991746304897, 9902.669377468628, 9968.65845127594, 9927.026898247153, 9799.564581332445, 9688.57616707936, 9523.172650965707, 9567.927809524892, 9614.286772350424, 9494.407505367415, 9523.606925217568, 9400.66309687701, 9440.744755302683, 9418.20537952414, 9327.79316110477, 9341.364562991526, 9430.733005490218, 9419.43689621588, 9422.075458725538, 9493.935613421369, 9469.92967804042, 9542.431244205036, 9550.944360769901, 9596.991611924084, 9605.804993818569, 9428.815335078416, 9352.514828633743, 9401.944355788995, 9299.626690108089, 9465.577423840485, 9578.35430929241, 9687.883967360938, 9759.910776300949, 9579.27069050894, 9645.838715098738, 9669.468692894347, 9710.798552494443, 9625.5323760456, 9688.872169457807, 9775.999747470813, 9775.127562903477, 9928.888603366848, 10052.851234474016, 10125.184693506631, 10323.641707711926, 10280.680873174582, 10324.59061183971, 10362.288977939252, 10515.003443124931, 10653.091812500714, 10647.007453826416, 10646.484236927387, 10764.834928845417, 10610.297093509467, 10764.105864113519, 10770.268573367737, 10785.029913966531, 11000.601758031544, 11059.615215098855, 11078.371082226913, 11162.750844919776, 11247.398242188689, 11182.85939600074, 11150.139005524157, 11142.40727372841, 10954.508450735742, 10949.063831182853, 10965.69001711289, 11164.559855089778, 11022.38710829075, 11146.00494487165, 11224.15126027834, 11384.399087731086, 11381.691796982588, 11419.696312990023, 11337.824491724388, 11671.637207929129, 11829.363115584814, 11783.115319886545, 11771.270653645925, 11900.356694335293, 11943.41145410241, 11820.930855197974, 11928.675750595661, 11612.913009717018, 11540.098386560358];
        const optimizedData = [10000, 9919.094353092662, 9894.33330070423, 9991.702406595741, 10028.2525626741, 10151.334168351224, 10250.415292952202, 10280.355741439671, 10306.06539126115, 10299.738714708867, 10267.636913466395, 10203.559928013663, 10299.218311659415, 10139.74502301522, 10210.829125403348, 10154.070918251638, 10128.13648090682, 9968.441886660918, 9887.841388858442, 9956.917621098311, 9794.764839028465, 9854.384115582328, 10006.123660141973, 10084.938674954083, 10018.841870278358, 10246.984765026686, 10164.07748635729, 10268.565481360254, 10259.110295947117, 10367.728217964952, 10395.006506561705, 10581.302287284563, 10543.436406049033, 10500.930096830745, 10533.875185783992, 10485.381412557172, 10581.488964920447, 10514.06483734221, 10320.708702042435, 10269.033787248092, 10404.465059121134, 10433.941040783015, 10469.204410362361, 10332.727648035074, 10290.065036230793, 10556.458286692827, 10313.187149334997, 10482.583391620523, 10496.770245398206, 10579.654766718448, 10512.388291607222, 10469.944482358685, 10546.668964928122, 10596.327969661865, 10736.072887239454, 10761.171329722449, 10813.18009299923, 10876.734815447584, 11148.07547443397, 11266.055026401971, 11111.47732358071, 11242.056005582197, 11334.144580039218, 11219.33905130767, 11138.959835484722, 11105.38518370475, 11236.224620362142, 11065.620210211107, 11065.570349491165, 11085.014714401446, 11101.809716016212, 11058.753819823762, 11230.243120122948, 11109.76610074662, 11087.286921239873, 11014.697577064086, 11159.81992071116, 10926.78355125545, 11013.568907645533, 10882.084411006274, 10909.920141696473, 10863.356393451666, 10955.570278469842, 10929.145939607311, 10865.860234481323, 10922.999045419934, 10987.562732409244, 10834.015561920849, 10873.9795049641, 10945.36857866204, 11028.212268680783, 10971.071576928145, 10890.137406818352, 11050.41840690949, 11071.344401639553, 10930.388212783173, 11225.271401568936, 11250.864756014098, 11341.373615629876, 11441.1302486065];
        
        // Create chart
        const ctx = document.getElementById('testChart').getContext('2d');
        const chartConfig = {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'Default Strategy',
                        data: defaultData,
                        borderColor: 'rgb(54, 162, 235)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: false
                    },
                    {
                        label: 'Optimized Strategy',
                        data: optimizedData,
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    title: { display: true, text: 'Default vs. Optimized Strategy Performance' },
                    tooltip: { mode: 'index', intersect: false }
                },
                scales: {
                    x: { display: true, title: { display: true, text: 'Date' }, ticks: { maxTicksLimit: 12 } },
                    y: { display: true, title: { display: true, text: 'Equity' } }
                }
            }
        };
        
        const chart = new Chart(ctx, chartConfig);
        
        // Button handlers
        document.getElementById('lineBtn').addEventListener('click', function() {
            updateChartType('line', false);
            setActiveButton(this);
        });
        
        document.getElementById('areaBtn').addEventListener('click', function() {
            updateChartType('line', true);
            setActiveButton(this);
        });
        
        document.getElementById('barBtn').addEventListener('click', function() {
            updateChartType('bar', false);
            setActiveButton(this);
        });
        
        document.getElementById('downloadBtn').addEventListener('click', function() {
            downloadChart();
        });
        
        function updateChartType(type, fill) {
            chart.config.type = type;
            chart.data.datasets.forEach(dataset => {
                dataset.fill = fill;
            });
            chart.update();
        }
        
        function setActiveButton(btn) {
            document.querySelectorAll('.controls button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        
        function downloadChart() {
            const link = document.createElement('a');
            link.download = 'chart.png';
            link.href = chart.toBase64Image();
            link.click();
        }
    });
    </script>
</body>
</html>
